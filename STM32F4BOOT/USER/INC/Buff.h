//===============================================================================================
/************************************************************************************************
*                                                                                                     
*            文件名称:              
*
*                摘要: 
*
*            创建时间: 2012-05-20  
*
*            修改时间: 2012-05-20 
*            修改原因:
*
*            
*
*                作者: 杨卫华
*
*************************************************************************************************/
//===============================================================================================

#ifndef __BUFF_H
#define __BUFF_H

//=================================================================================================
//*************************************************************************************************
//宏定义

#define   B_NORMAL      0
#define   B_FULL        1 
#define   B_REWIND      2  
#define   B_EMPTY       3



//=================================================================================================
//*************************************************************************************************
//数据类型定义
//=====================================================================================
typedef  struct __Buff
{
     uint16_t   size;
     uint16_t   i;

     uint16_t   back_i;
     uint16_t   new_data_len;
     uint8_t    state;   //队列状态--空,溢出,正常
     uint8_t    *pcur;
     uint8_t    *pback;
     uint8_t    *pb;

}BUFF;

#define  BACK_BUFF_POINT(pb) do{(pb)->back_i = (pb)->i; (pb)->pback = (pb)->pcur;}while(0)
#define  RESTORE_BUFF_POINT(pb) do{(pb)->i = (pb)->back_i; (pb)->pcur= (pb)->pback;}while(0)



//=================================================================================================
//*************************************************************************************************
//变量定义



//=================================================================================================
//*************************************************************************************************
//外部函数声明

extern  uint8_t FetchFromBuff(BUFF *pb);
extern void Store2Buff(BUFF *pb, uint8_t byte);



#endif    //__QUEUE_H


