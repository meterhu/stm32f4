//===============================================================================================
/************************************************************************************************
*                                                                                                     
*            文件名称:              
*
*                摘要: 
*
*            创建时间: 2012-05-20  
*
*            修改时间: 2012-05-20 
*            修改原因:
*
*            
*
*                作者: 杨卫华
*
*************************************************************************************************/
//===============================================================================================

#ifndef __MAIN_H
#define __MAIN_H

//=================================================================================================
//*************************************************************************************************
//宏定义

//=================================================================================================
//*************************************************************************************************
//数据类型定义



//=================================================================================================
//*************************************************************************************************
//变量定义

//========================================================================================
//
//=================================================================================================
//*************************************************************************************************
//外部函数声明

//===============================================================================================
__forceinline  void OS_ENTRY_INT(void)
{
    void          OSIntEnter              (void);
    void          OSIntExit               (void);

    //通常OS_CRITICAL_METHOD == 2,退出中断后中断打开关闭保持原来的状态，OS_CRITICAL_METHOD == 3要复杂一些
   #ifdef  _USE_OS 
    #if OS_CRITICAL_METHOD == 3                                //Allocate storage for CPU status register
     OS_CPU_SR     cpu_sr  __attribute__ ((unused)) = 0;       //避免编译器未使用警告
    #endif
   
    #if OS_CRITICAL_METHOD == 3
	 OS_ENTER_CRITICAL();
    #endif
   #endif

}
  
//===============================================================================================
__forceinline  void OS_EXIT_INT(void)
{
   
   void          OSIntEnter              (void);
   void          OSIntExit               (void);
   #ifdef  _USE_OS 
    #if OS_CRITICAL_METHOD == 3    //Allocate storage for CPU status register
     OS_CPU_SR     cpu_sr = 0;
    #endif	 

     OSIntExit();
	

    #if OS_CRITICAL_METHOD == 3
     OS_EXIT_CRITICAL();
    #endif
   #endif

}


#define   LED_OFF()   GPIO_SetBits(GPIOD, GPIO_Pin_3)
#define   LED_ON()    GPIO_ResetBits(GPIOD, GPIO_Pin_3)

#define   LED_TOGGLE()    GPIO_ToggleBits(GPIOD, GPIO_Pin_3)
//GPIO_ReadOutputDataBit

//===============================================================================================
//extern OS_EVENT    *UART_COMM_FRM_SEM;    //互斥

extern void  InitBoardDev(void);
extern void  InitApp(void);

#endif    //__MAIN_H

