//===============================================================================================
/************************************************************************************************
*                                                                                                     
*            文件名称:              
*
*                摘要: 
*
*            创建时间: 2012-05-20  
*
*            修改时间: 2012-05-20 
*            修改原因:
*
*            
*
*                作者: 杨卫华
*
*************************************************************************************************/
//===============================================================================================

#ifndef __QUEUE_H
#define __QUEUE_H

//=================================================================================================
//*************************************************************************************************
//宏定义

#define   Q_NORMAL    0
#define   Q_FULL      1   
#define   Q_EMPTY     2 
#define   RQ_BUFF_SIZE 0xffff


//=================================================================================================
//*************************************************************************************************
//数据类型定义
//=====================================================================================
typedef  struct __Queue
{
     uint16_t   size;
     uint16_t   rear;
     uint16_t   front;
     uint16_t   front_back;

     uint8_t    state;   //队列状态--空,溢出,正常
     uint8_t    r_new;     //是否接收了新数据
     uint8_t    tmp_rbuff[2];
     uint8_t    *qb; 

}QUEUE;


//=================================================================================================
//*************************************************************************************************
//变量定义

//========================================================================================
//
//=====================================================================================
//__forceinline   Store2RQ(UART_DEV_RBUFF *pu, uint8_t byte)\
//注意UART0_RECV_BUFF_SIZE 的取值
//注意宏中如果包含多行，且中间有空行，空行也必须有换行符'\'   
//#define Store2RQ(pu, byte)\
//do\
//{\
//    \
//    if ((((pu)->rear + 1) & (pu)->size) != (pu)->front)\
//    {\
//        *((pu)->qb + (pu)->rear) = (byte); \
//        (pu)->rear = ((pu)->rear + 1) & (pu)->size; \
//        (pu)->rear = Q_NORMAL;\
//    }\
//    else\
//    {\
//        (pu)->tmp_rbuff[0] =  (byte);\
//        (pu)->rear         = Q_FULL;\
//    }\
//    \
//}while(0)

//=================================================================================================
//*************************************************************************************************
//外部函数声明
extern  void InitQueue(QUEUE *pq, uint8_t *pd, uint16_t size, uint8_t em_full);
extern  uint8_t FetchFromQ(QUEUE *pq);
extern  void Store2Q(QUEUE *pq, uint8_t byte);



#endif    //__QUEUE_H


